<!DOCTYPE html>
<html lang="en">
<head>
    	<meta charset="utf-8">
	
	<!--This tag customizes the status bar in iDevices and content attribute can have value: default(transparent),
	black, Black-translucent(results in a transparent background with white text. Additionally, 
	this status bar floats above your content,
	meaning you have to push your content down 20px in order to not have the content overlap with the status bar text.-->
	
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<!-- TAMBAH
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no"> -->
	
	 <!--Here replace 'icon.png' with the path of your app's icon --> 
	<link rel="apple-touch-icon" href="icon.png">                        
      	
	<!-- from PWA Builder
	<link rel='manifest' href='/manifest.json'> -->
	
	<meta name="apple-mobile-web-app-title" content="PuzzleAR">
	<meta name="application-name" content="PuzzleAR">
	<!-- <meta name="msapplication-config" content="/browserconfig.xml">-->
	
	<!-- add pwa icon -->
	<link href="splashscreens/iphone5_splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" /> 
	<link href="splashscreens/iphone6_splash.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" /> 
	<link href="splashscreens/iphoneplus_splash.png" media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image" /> 
	<link href="splashscreens/iphonex_splash.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image" /> 
	<link href="splashscreens/ipad_splash.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link href="splashscreens/ipadpro1_splash.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link href="splashscreens/ipadpro2_splash.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" /> 
	<!-- end PWA icon -->
	
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	
	<title>ðŸ¤§ WebAR Puzzle Skeleton ðŸ¤§</title>
	
	
	<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script> 
      	<!--<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.0/aframe/examples/vendor/aframe/build/aframe.min.js"></script>-->
	<!-- tambahan library nggo ngeload animasi balungan njoget -->
      	<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
	<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
	<!--<script src="https://raw.githack.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>-->
	<!-- add end fix animation dancing_skeleton with js >.< -->
	<link rel="stylesheet" href="./css/style.css">
 	<!-- add splashscreen start -->
	<script>
	window.onload = function(){    
		setTimeout(function(){
			var resizeEvent = window.document.createEvent('UIEvents'); 
			resizeEvent.initUIEvent('resize', true, false, window, 0); 
			window.dispatchEvent(resizeEvent);
		}, 3000);
	};	
	</script>
    	<!-- end of splashscreen -->
</head>
		 
  <body style='margin : 0px; overflow: hidden;'>
    
    <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
	<div class="overlay">
       	  <div id="button">
            <button>START</button>
          </div>
        </div> 
        <a-assets>
            <a-asset-item id="animated-asset" src="gltf/right_foot.gltf"></a-asset-item>
            <a-asset-item id="animated-asset2" src="gltf/left_foot.gltf"></a-asset-item>
            <a-asset-item id="animated-asset3" src="gltf/pelvis.gltf"></a-asset-item>
            <a-asset-item id="animated-asset4" src="gltf/left_arm.gltf"></a-asset-item>
            <a-asset-item id="animated-asset5" src="gltf/left_hand.gltf"></a-asset-item>
            <a-asset-item id="animated-asset6" src="gltf/left_leg.gltf"></a-asset-item>
            <a-asset-item id="animated-asset7" src="gltf/right_arm.gltf"></a-asset-item>
            <a-asset-item id="animated-asset8" src="gltf/right_hand.gltf"></a-asset-item>
            <a-asset-item id="animated-asset9" src="gltf/right_leg.gltf"></a-asset-item>
            <a-asset-item id="animated-asset10" src="gltf/ribs.gltf"></a-asset-item>
            <a-asset-item id="animated-asset11" src="gltf/skull.gltf"></a-asset-item>
            <a-asset-item id="animated-asset12" src="gltf/dancing_skeleton.glb"></a-asset-item>
	    <a-asset-item id="animated-asset13" src="gltf/usm.glb"></a-asset-item>
		<audio id="sound" src="sound/samba_soryy.mp3"></audio>
        </a-assets>
	<a-assets>
            <audio id="sound" src="./sound/samba_soryy.mp3" preload="auto"></audio>
        </a-assets>
          
      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-A.patt">
          <a-entity
              position="0 0 0"
              id="animated-model"
              gltf-model="#animated-asset"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-A_1.patt">
          <a-entity
              position="0 0 0"
              id="animated-model2"
              gltf-model="#animated-asset2"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-M.patt">
          <a-entity
              position="0 0 0"
              id="animated-model3"
              gltf-model="#animated-asset3"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-F.patt">
          <a-entity
              position="0 0 0"
              id="animated-model4"
              gltf-model="#animated-asset4"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-T.patt">
          <a-entity
              position="0 0 0"
              id="animated-model5"
              gltf-model="#animated-asset5"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-J.patt">
          <a-entity
              position="0 0 0"
              id="animated-model6"
              gltf-model="#animated-asset6"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-I.patt">
          <a-entity
              position="0 0 0"
              id="animated-model7"
              gltf-model="#animated-asset7"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-K.patt">
          <a-entity
              position="0 0 0"
              id="animated-model8"
              gltf-model="#animated-asset8"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-Y.patt">
          <a-entity
              position="0 0 0"
              id="animated-model9"
              gltf-model="#animated-asset9"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-S.patt">
          <a-entity
              position="0 0 0"
              id="animated-model10"
              gltf-model="#animated-asset10"
              scale="1.75 1.75 1.75">
          </a-entity>
      </a-marker>

      <a-marker preset="custom" type="pattern" url="pattern-patt/pattern-U.patt">
          <a-entity
              position="0 0 0"
              id="animated-model11"
              gltf-model="#animated-asset11"
              scale="1.75 1.75 1.75">
	  </a-entity>
      </a-marker>
      
      <!-- add dancing skeleton -->
      <a-marker markerhandler preset="custom" type="pattern" url="pattern/dancing_skeleton.patt"  emitevents="true" cursor="rayOrigin: mouse">
          <a-entity
              position="0 0 0"
              id="animated-model12"
              gltf-model="#animated-asset12"
              scale="15 15 15" animation-mixer soundhandler>
          </a-entity>
	      
     		<!--<a-entity id="animated-marker12" sound="src: #sound" autoplay="false"></a-entity>-->
	      
      </a-marker>
	
	    <a-entity id="animated-marker12" sound="src: #sound" autoplay="false"> </a-entity>
	    
      <a-entity camera></a-entity>
    </a-scene>

    <!-- add splash screen javascript-->
      <script>
        const overlay = document.querySelector(".overlay");
    	const startBtn = overlay.querySelector("button");
    	console.log(startBtn);
    	startBtn.addEventListener("click", function(){
      	overlay.style.display = "none";    
    	});
      </script>
    
	  
    <!-- add sound query select javascript-->
      <script>
	AFRAME.registerComponent('soundhandler', {
	    tick: function () {
		   var entity = document.querySelector('[sound]');
		 if (document.querySelector('a-marker').object3D.visible == true) {
		    entity.components.sound.playSound();
		} else {
		    entity.components.sound.pauseSound();
		}
	     }
	});
	</script>
	  
	  <!-- test FPS
	  <script>
	  	javascript:(function(){var script=document.createElement('script');
				       script.onload=function(){var stats=new Stats();
								document.body.appendChild(stats.dom);
								requestAnimationFrame(function loop(){stats.update();
												      requestAnimationFrame(loop)});
							       };
				       script.src='//mrdoob.github.io/stats.js/build/stats.min.js';
				       document.head.appendChild(script);
				      })
		()
	  </script> -->
	  
  </body>
</html>
